<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- SEO -->
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Add-On Protocol - RS232 &amp; USB | MyGeotab SDK</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Add-On Protocol - RS232 &amp; USB" />
<meta name="author" content="The Geotab Team" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Geotab SDK (Software Development Kit) is a powerful set of tools for automating tasks and working with the data in MyGeotab. Within these documents you will find information on how to develop JavaScript and C# applications, build and integrate Add-Ins and use MyGeotab with third-party systems." />
<meta property="og:description" content="The Geotab SDK (Software Development Kit) is a powerful set of tools for automating tasks and working with the data in MyGeotab. Within these documents you will find information on how to develop JavaScript and C# applications, build and integrate Add-Ins and use MyGeotab with third-party systems." />
<link rel="canonical" href="https://geotab.github.io/hardware/addon-protocols/rs232-usb/" />
<meta property="og:url" content="https://geotab.github.io/hardware/addon-protocols/rs232-usb/" />
<meta property="og:site_name" content="MyGeotab SDK" />
<script type="application/ld+json">
{"@type":"WebPage","headline":"Add-On Protocol - RS232 &amp; USB","url":"https://geotab.github.io/hardware/addon-protocols/rs232-usb/","author":{"@type":"Person","name":"The Geotab Team"},"description":"The Geotab SDK (Software Development Kit) is a powerful set of tools for automating tasks and working with the data in MyGeotab. Within these documents you will find information on how to develop JavaScript and C# applications, build and integrate Add-Ins and use MyGeotab with third-party systems.","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- CSS -->
  <!-- inject:css -->
  <link rel="stylesheet" href="/assets/stylesheets/style.css">
  <!-- endinject -->

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/images/touch/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico">

</head>


<body>

  <header>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <a class="navbar-brand" href="/">
            <img src="/assets/images/pillar.svg" width="30" height="30" class="d-inline-block align-top" alt="">
            MyGeotab SDK
        </a>
        <button class="navbar-toggler d-lg-none" id="toggler" type="button">
            <span class="navbar-toggler-icon"></span>
        </button>
</header>


  <div id="wrapper">
<div id="sidebar-wrapper" class="bg-light">
    <nav id="sidebar" class="sidebar">
    
        <h4>Software</h4>
        <ul class="nav flex-column">
            
            <li class="nav-link">
                
                <a href="/software/introduction/">Introduction</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/resources/new/">What's New</a>
                
            </li>
            
        
        <h5>Guides</h5>
        <ul class="nav flex-column">
            
            <li class="nav-link">
                
                <a href="/software/guides/getting-started/">Getting Started</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/software/guides/concepts/">Concepts</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/software/guides/using-in-javascript/">Using in Javascript</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/software/guides/using-in-dotnet/">Using in .Net</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/software/guides/data-feed">Data Feed</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/software/guides/mygeotab-urls/">Using MyGeotab URLs</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/software/guides/using-go-devices/">Using GO Devices</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/software/guides/go-device-logging/">GO Device Logging</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/software/guides/third-party-devices/">Using Third-Party Devices</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/software/guides/developing-addins/">Developing Add-Ins</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/software/guides/drive-addins/">Geotab Drive Add-Ins</a>
                
            </li>
            
        </ul>
        
        <h5>API</h5>
        <ul class="nav flex-column">
            
            <li class="nav-link">
                
                <a href="/software/api/reference/">Reference</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/software/api/runner.html">Runner</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/software/api/clients/">API Clients</a>
                
            </li>
            
        </ul>
        
        <h5>Code Samples</h5>
        <ul class="nav flex-column">
            
            <li class="nav-link">
                
                <a href="/software/js-samples/">Javascript Examples</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="https://github.com/Geotab/sdk-dotnet-samples">.Net Examples</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="https://github.com/Geotab/sdk-addin-samples">Add-in Examples</a>
                
            </li>
            
        </ul>
         
        </ul>
    
        <h4>Hardware</h4>
        <ul class="nav flex-column">
            
            <li class="nav-link">
                
                <a href="/hardware/introduction/">Introduction</a>
                
            </li>
            
        
        <h5>Add-on Protocols</h5>
        <ul class="nav flex-column">
            
            <li class="nav-link active">
                
                <a href="/hardware/addon-protocols/rs232-usb/">RS232 & USB</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/hardware/addon-protocols/can/">CAN</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/hardware/addon-protocols/ble/">BLE</a>
                
            </li>
            
        </ul>
        
        <h5>Code Samples</h5>
        <ul class="nav flex-column">
            
            <li class="nav-link">
                
                <a href="/hardware/samples/python/">Python</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="https://github.com/Geotab/android-external-device-example">Android</a>
                
            </li>
            
        </ul>
        
        <h5>Developing an IOX</h5>
        <ul class="nav flex-column">
            
            <li class="nav-link">
                
                <a href="/hardware/developing-an-iox/hardware-design-guide/">Hardware Design Guide</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="/hardware/developing-an-iox/messaging-protocol/">Messaging Protocol</a>
                
            </li>
            
        </ul>
         
        </ul>
    
        <h4>Resources</h4>
        <ul class="nav flex-column">
            
            <li class="nav-link">
                
                <a href="https://helpdesk.geotab.com/hc/en-us/community/topics/200655183-SDK-Forum">Forums</a>
                
            </li>
            
            <li class="nav-link">
                
                <a href="https://www.geotab.com/dev-channel/">Dev Channel</a>
                
            </li>
            
         
        </ul>
    
    </nav>
</div>
<main role="main">
  <div class="container-fluid">
    <div class="row">

      <article class="col-md-12">
        <header>
          <a href="https://github.com/Geotab/sdk/blob/master/src/hardware/addon-protocols/rs232-usb.md" class="float-right small"><svg class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg> Edit on GitHub</a>
          <h1>Add-On Protocol - RS232 & USB</h1>
        </header>

        <div>
          <p>External devices can communicate with the Geotab GO device through the revised Third-Party Data protocol. An initial Handshake will need to be successfully negotiated in order for the GO device to accept third-party data. Data can only be sent in a predefined format and will be saved and sent to MyGeotab.</p>

<h2 id="special-requirements-for-usb-integrations">Special Requirements for USB Integrations</h2>

<p>The IOX-USB operates as a USB 2.0 full-speed host. The maximum data transfer rate is 12 Mbit/s. The IOX-USB can use two methods to enumerate a USB device:</p>

<ol>
<li><p>The <a href="https://source.android.com/devices/accessories/protocol.html">Android Open Accessory protocol</a>. This <a href="https://github.com/Geotab/android-external-device-example">sample project</a> can be used as a framework.</p></li>
<li><p>USB-CDC (Communications Device Class)</p></li>
</ol>

<h3 id="enabling-iox-usb-data-transfer">Enabling IOX-USB Data Transfer</h3>

<p>To enable third-party data communication on the IOX-USB, apply the following custom parameter to the GO device through MyGeotab.</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;GoParameters&gt;&lt;Parameter</span> <span class="na">Description=</span><span class="s">"Enable USB Data"</span> <span class="na">Offset=</span><span class="s">"164"</span> <span class="na">Bytes=</span><span class="s">"02"</span><span class="nt">/&gt;&lt;/GoParameters&gt;</span>
</code></pre></div>
<p>The GO device will automatically upgrade to the ProPlus plan — with all associated charges — once third-party data transfer begins.</p>

<h2 id="integration-process">Integration Process</h2>

<p>The following process should be followed when integrating a third-party device with the GO device using our Third-Party Data Protocol:</p>

<h3 id="1-request-external-device-id">1 - Request External Device ID</h3>

<p>Contact the <a href="mailto:soleng@geotab.com">Geotab solution engineering team</a> to obtain an External Device ID for your third-party device. This will allow us to uniquely identify the device when it connects to a GO device. Thereafter, any connection established by that type of external device will be recorded as Status Data in MyGeotab under the naming format &ldquo;[External device name] device connected&rdquo;.</p>

<h3 id="2-request-status-data-ids">2 - Request Status Data IDs</h3>

<p>Contact the <a href="mailto:soleng@geotab.com">Geotab solution engineering team</a> to obtain Status Data IDs for every separate piece of information you wish to send to the GO device.</p>

<p>For each piece of information, conversion parameters are also required. Conversions must be in the form as per the table below:</p>

<table><thead>
<tr>
<th>Status Data ID</th>
<th>Description</th>
<th>Multiplier</th>
<th>Offset</th>
<th>Unit</th>
</tr>
</thead><tbody>
<tr>
<td>5 (assigned by Geotab)</td>
<td>Odometer</td>
<td>0.1</td>
<td>0</td>
<td>km</td>
</tr>
<tr>
<td>53 (assigned by Geotab)</td>
<td>Outside Temperature</td>
<td>1</td>
<td>−40</td>
<td>degrees C</td>
</tr>
</tbody></table>

<p>The formula for the multiplier and offset values is as follows:</p>

<p>Final Value = (Initial Value × Multiplier) + Offset</p>

<h3 id="3-implement-the-third-party-protocol">3 — Implement the Third-Party Protocol</h3>

<p>Implement the Third-Party Protocol in the external device as detailed below.</p>

<h2 id="handshake">Handshake</h2>

<p>Ignition must be on for the handshake process.</p>

<ol>
<li>After powering up, the GO device will enter an external device detection cycle. The external device will be powered for 72 seconds. In this interval, the GO device will listen for a Handshake Sync from the external device. The Handshake Sync is used to indicate that an external device is present. For implementations using the IOX-RS232, the Handshake Sync is also used to detect baud rate.

<ul>
<li>The external device must send the Handshake Sync message once per second.</li>
<li>If a Handshake Sync message is not detected from the external device after 72 seconds, the external device is powered down for 5 seconds, then powered up again to restart the detection cycle.</li>
</ul></li>
<li>The GO device will reply to a Handshake Sync with with a Handshake Request.</li>
<li>The external device must reply with a Handshake Confirmation message within 2 seconds. If the external device would like an acknowledgment from the GO device that it received the Handshake Confirmation message, the corresponding flag in the Handshake Confirmation message may be set.</li>
<li>After sending the Handshake Confirmation message, the external device can begin to send third-party data as required. For every Third-Party Data Message sent, the GO device will reply with a Data Acknowledge message.

<ul>
<li>If the external device receives no response to a Third-Party Data message, it must restart the handshake process — returning to step 1 above.</li>
</ul></li>
<li>The GO device may send a Handshake Request message at any time after the initial handshake. The external device must respond with a Handshake Confirmation message. If the external device does not respond, it must restart the handshake process — returning to step 1 above.</li>
</ol>

<blockquote>
<p>See Appendix A for an example of raw message data. See Appendix B for a message flow diagram.</p>
</blockquote>

<h3 id="data">Data</h3>

<p>All values must be sent with the least significant byte first.</p>

<h3 id="checksum">Checksum</h3>

<p>Each message will contain a 2-byte Fletcher&rsquo;s Checksum calculated across all the bytes of the message except the checksum itself. The checksum values are bytes, and as such overflow from 255 (0xFF) to 0 (0x00). The bytes used for the checksum calculation are all the bytes up to the checksum byte, including STX, LEN, TYPE, but not including ETX.</p>

<p>Checksum calculation pseudo code:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">byte</span> <span class="nx">ChkA</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kr">byte</span> <span class="nx">ChkB</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// n is the number of bytes in the message</span>
<span class="c1">// up to, but not including, the checksum</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
<span class="nx">ChkA</span> <span class="o">=</span> <span class="nx">ChkA</span> <span class="o">+</span> <span class="nx">MsgBuffer</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
<span class="nx">ChkB</span> <span class="o">=</span> <span class="nx">ChkB</span> <span class="o">+</span> <span class="nx">ChkA</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// ChkA precedes ChkB in the message</span>
</code></pre></div>
<h2 id="messages-from-the-go-device">Messages from the GO device</h2>

<h3 id="msg-type-0x01-handshake-request">Msg Type 0x01: Handshake Request</h3>

<p>Issued by GO device on receipt of the Handshake Sync and periodically re-sent to confirm that the external device is still attached.</p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = 0</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>Reply: Handshake Confirmation (Msg Type 0x81)</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<h3 id="msg-type-0x02-third-party-data-acknowledge">Msg Type 0x02: Third-Party Data Acknowledge</h3>

<p>Issued by GO device on receipt of Third-Party Data from the External Device.</p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 2</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = 0</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>5</td>
</tr>
</tbody></table>

<h3 id="msg-type-0x21-go-device-data">Msg Type 0x21: GO Device Data</h3>

<p>Issued by GO device every 2 seconds to a connected Enhanced HOS Device (ID: 4141) or periodically when a 0x85 request message is received.</p>

<ul>
<li>An Enhanced HOS Device must ACK this message with a 0x84 message.</li>
<li>If the data is requested periodically using the 0x85 message, the ACK is optional.</li>
</ul>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 0x21</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length &gt;= 40 [1]</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Date / Time [2]</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>Latitude</td>
<td>4</td>
<td>7</td>
</tr>
<tr>
<td>Longitude</td>
<td>4</td>
<td>11</td>
</tr>
<tr>
<td>Road Speed [3]</td>
<td>1</td>
<td>15</td>
</tr>
<tr>
<td>RPM</td>
<td>2</td>
<td>16</td>
</tr>
<tr>
<td>Odometer [4]</td>
<td>4</td>
<td>18</td>
</tr>
<tr>
<td>Status Flags (from LSB): <br> 1st bit: 1 = GPS Valid <br> 2nd bit: 1 = Ignition On <br> 3rd bit: 1 = Engine Bus Activity <br> 4th bit: 1 = Date/Time Valid <br> 5th bit: 1 = Speed From Engine <br> 6th bit: 1 = Odometer From Engine</td>
<td>1</td>
<td>22</td>
</tr>
<tr>
<td>Trip Odometer [4]</td>
<td>4</td>
<td>23</td>
</tr>
<tr>
<td>Total Engine Hours</td>
<td>4</td>
<td>27</td>
</tr>
<tr>
<td>Trip Duration</td>
<td>4</td>
<td>31</td>
</tr>
<tr>
<td>GO Device ID [5]</td>
<td>4</td>
<td>35</td>
</tr>
<tr>
<td>Driver ID</td>
<td>4</td>
<td>39</td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>Length + 3</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>Length + 5</td>
</tr>
<tr>
<td><u>Reply: Device Data Ack</u></td>
<td></td>
<td></td>
</tr>
</tbody></table>

<ol>
<li>All implementations of this message must cater for the message length increasing in the future.</li>
<li>&ldquo;Date/Time&rdquo; is a &lsquo;seconds&rsquo; counter starting from 1st of January 2002.</li>
<li>If Road Speed from the engine is not available, GPS speed is used.</li>
<li>If Odometer is not available, GPS device distance is used.</li>
<li>Driver ID only available when using the IOX-NFC.</li>
</ol>

<h3 id="conversions">Conversions</h3>

<table><thead>
<tr>
<th><strong>Data</strong></th>
<th><strong>Conversion</strong></th>
<th><strong>Units</strong></th>
</tr>
</thead><tbody>
<tr>
<td>Engine Road Speed</td>
<td>1</td>
<td>km/h</td>
</tr>
<tr>
<td>Odometer</td>
<td>0.1</td>
<td>km</td>
</tr>
<tr>
<td>RPM</td>
<td>0.25</td>
<td>RPM</td>
</tr>
<tr>
<td>Lat/Long</td>
<td>1e-7</td>
<td>degrees</td>
</tr>
<tr>
<td>Engine Hours</td>
<td>0.1</td>
<td>h</td>
</tr>
<tr>
<td>Trip Duration</td>
<td>1</td>
<td>s</td>
</tr>
</tbody></table>

<h3 id="msg-type-0x22-binary-data-response">Msg Type 0x22: Binary Data Response</h3>

<p>Issued by the GO device on successful/unsuccessful transmission of Binary Data (via message type 0x86) to the server.</p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 0x22</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = 4</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Binary data transmission success <br> 0 = transmission failure <br> 1 = transmission success</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>Reserved</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>7</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>9</td>
</tr>
</tbody></table>

<h3 id="msg-type-0x23-binary-data-packet">Msg Type 0x23: Binary Data Packet</h3>

<p>Issued by the GO device on receipt of Binary Data from the server destined for the external device. This message format will only be used if the corresponding &ldquo;Binary Data Packet Wrapping&rdquo; flag has been set by the external device during the Handshake Confirmation. The payload of the binary data packet message will be the raw bytes as sent from the server.</p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 0x23</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = x (0 - 249)</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Binary Data</td>
<td>x</td>
<td>3</td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>3+x</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>5+x</td>
</tr>
</tbody></table>

<h2 id="messages-from-external-device">Messages from External Device</h2>

<h3 id="handshake-sync-auto-baud-detect-for-rs232">Handshake Sync (Auto-BAUD detect for RS232)</h3>

<p>Issued by External Device every second until the Handshake Request is received.</p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>Sync Char (0x55)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Reply: Handshake Request (Msg Type 1)</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<h3 id="msg-type-0x81-handshake-confirmation">Msg Type 0x81: Handshake Confirmation</h3>

<p>Issued by the External Device when it receives the Handshake Request.</p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 0x81</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = 4</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>External Device ID (assigned by Geotab)</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>Flags <br> 1st bit: Handshake Confirmation ACK <br> 2nd bit: Binary Data Packet Wrapping <br> All other bits:Reserved for future implementation, must be set to 0</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>7</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>9</td>
</tr>
</tbody></table>

<p>Handshake Confirmation ACK:</p>

<ul>
<li>0: No Ack to Handshake Confirmation message will be sent by the GO device.</li>
<li>1: The Handshake Confirmation is to be ACKed with a Third Party Data Acknowledge message.</li>
</ul>

<p>Binary Data Packet Wrapping:</p>

<ul>
<li>0: The passthrough data from the server will be passed to the external device without modification.</li>
<li>1: The passthrough data from the server will be wrapped in a Binary Data Packet message before being sent to the external device.</li>
</ul>

<h3 id="msg-type-0x80-third-party-data-as-status-data">Msg Type 0x80: Third-Party Data as Status Data</h3>

<p>Issued by the external device whenever it requires Third-Party Data to be saved on the GO device as Status Data.</p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 0x80</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = 6</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Data ID (assigned by Geotab)</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>Data</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>9</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>11</td>
</tr>
<tr>
<td>Reply: Third-Party Data Ack (Msg Type 0x02)</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<h3 id="msg-type-0x82-free-format-third-party-data">Msg Type 0x82: Free Format Third-Party Data</h3>

<p>Issued by the external device whenever it wants Third-Party Data to be saved on the GO device in a free format (1 to 27 bytes) that will be saved into MyGeotab as Custom Data.</p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 0x82</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = x (1 to 27)</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Data</td>
<td>x</td>
<td>3</td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>3 + x</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>5 + x</td>
</tr>
<tr>
<td>Reply: Third-Party Data Ack (Msg Type 0x02)</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<h3 id="msg-type-0x84-device-data-ack">Msg Type 0x84: Device Data ACK</h3>

<p>Issued by the External Device on receipt of the GO Device Data message.</p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 0x84</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = 0</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>5</td>
</tr>
</tbody></table>

<p>For the purpose of acknowledging the GO Device Data message when connected as an Enhanced HOS Device:</p>

<ul>
<li>The GO device will keep streaming the GO Device Data messages even if no ACK is received for up to 30 seconds.</li>
<li>If no ACK is received in that time frame the GO Device will send an External Device Disconnected record to the server and will wait for a new Handshake Sync request from the External Device.</li>
<li>If the ACK message is received within the 30 seconds the counter will be re-initialized.</li>
</ul>

<h3 id="msg-type-0x85-request-device-data-message">Msg Type 0x85: Request Device Data Message</h3>

<p>This is a request-response message. It can be issued by the External Device whenever it wishes to receive the Device Data Info Message (Message Type 0x21).</p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 0x85</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = 0</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>Reply: GO Device Data (Msg Type 0x21)</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<h3 id="msg-type-0x86-binary-data-packet">Msg Type 0x86: Binary Data Packet</h3>

<p>Sent by the external device when sending binary data directly to the server. The contents of the message will be ignored by the GO device and simply sent on to the server for processing. The GO device will respond with the Binary Data Response message indicating whether the data was successfully sent via the modem.</p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 0x86</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = x (0 - 250)</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Binary Data</td>
<td>x</td>
<td>3</td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>3+x</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>5+x</td>
</tr>
<tr>
<td>Reply: Binary Data Response (Msg Type 0x22)</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<p>The payload of the binary data would need to adhere to a protocol understood by the server. The MIME data transfer protocol is under review and will be linked to from here when ready. The proposed implementation includes:</p>

<ul>
<li>Length of MIME type (1 byte)</li>
<li>MIME type in ASCII</li>
<li>Length of body (4 bytes)</li>
<li>Body (raw bytes of MIME-type specified)</li>
</ul>

<p>The MIME data message would need to be broken into 250 byte (or less) chunks and sent using the binary data packet message type 0x86. The server would stitch together the binary bytes and make then available via the MyGeotab SDK once the full amount of bytes was received. See Appendix C.</p>

<h3 id="msg-type-0x87-third-party-data-as-priority-status-data">Msg Type 0x87: Third-Party Data as Priority Status Data</h3>

<p>Priority Status Data will be treated the same as the 0x80 Status Data message, but will also be logged using an Iridium modem connection if available.</p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 0x87</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = 6</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Data ID (assigned by Geotab)</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>Data</td>
<td>4</td>
<td>5</td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>9</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>11</td>
</tr>
<tr>
<td>Reply: Third-Party Data Ack (Msg Type 0x02)</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<h3 id="msg-type-0x89-ping">Msg Type 0x89: Ping</h3>

<p>After handshaking, this message can be issued periodically by the External Device to check that the GO device is active and ready. The GO device will normally reply with the Third-Party Data Ack (Msg Type 0x02). If this reply is not received, the External Device should reset and begin sending the Handshake Sync (0x55).</p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 0x89</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = 0</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>5</td>
</tr>
<tr>
<td>Reply: Third-Party Data Ack (Msg Type 0x02)</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<h2 id="appendices">Appendices</h2>

<h3 id="appendix-a-raw-message-data-example-for-iox-usb-iox-rs232">Appendix A: Raw Message Data Example for IOX-USB &amp; IOX-RS232</h3>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">Handshake</span> <span class="nx">Sync</span> <span class="k">from</span> <span class="nx">External</span> <span class="nx">Device</span>
<span class="mh">0x55</span><span class="err">…</span> <span class="mh">0x55</span><span class="err">…</span> <span class="mh">0x55</span>

<span class="nx">Handshake</span> <span class="nx">Request</span> <span class="k">from</span> <span class="nx">GO</span> <span class="nx">device</span>
<span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x03</span>

<span class="nx">Handshake</span> <span class="nx">Confirmation</span> <span class="k">from</span> <span class="nx">External</span> <span class="nx">Device</span>
<span class="p">(</span><span class="nx">Device</span> <span class="nx">ID</span><span class="p">:</span> <span class="mi">4108</span> <span class="o">=</span> <span class="mh">0x0000100C</span><span class="p">)</span>
<span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x81</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x0C</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xA3</span><span class="p">,</span> <span class="mh">0x88</span><span class="p">,</span> <span class="mh">0x03</span>

<span class="nx">Third</span><span class="o">-</span><span class="nx">Party</span> <span class="nx">Data</span> <span class="k">from</span> <span class="nx">External</span> <span class="nx">Device</span>
<span class="p">(</span><span class="nx">Status</span> <span class="nx">Data</span> <span class="nx">ID</span><span class="p">:</span> <span class="mi">9999</span> <span class="o">=</span> <span class="mh">0x270F</span><span class="p">,</span> <span class="nx">Data</span> <span class="nx">Value</span><span class="p">:</span> <span class="mi">230</span> <span class="o">=</span> <span class="mh">0x000000E6</span><span class="p">)</span>
<span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x0F</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">,</span> <span class="mh">0xE6</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xA4</span><span class="p">,</span> <span class="mh">0xF1</span><span class="p">,</span> <span class="mh">0x03</span>

<span class="nx">Third</span><span class="o">-</span><span class="nx">Party</span> <span class="nx">Data</span> <span class="nx">Acknowledge</span> <span class="k">from</span> <span class="nx">GO</span> <span class="nx">device</span>
<span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x0A</span><span class="p">,</span> <span class="mh">0x03</span>
</code></pre></div>
<h3 id="appendix-b-sample-message-flow-for-iox-usb-iox-rs232">Appendix B: Sample Message Flow for IOX-USB &amp; IOX-RS232</h3>

<p><img src="/hardware/addon-protocols/rs232-usb_0.png" alt=""></p>

<h3 id="appendix-c-using-binary-data-messages-to-transfer-mime-data">Appendix C: Using Binary Data Messages to Transfer MIME Data</h3>

<p>MIME-type data can be transferred from an external device to the server via the GO device. It will be saved as a MIME-type blob on the server. The blob can be accessed through the software SDK. The SDK can also be used to send MIME-type data from the server to an external device connected to a GO device.</p>

<h4 id="the-mime-type-protocol">The MIME Type Protocol:</h4>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>MIME type length = x</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>MIME type in ASCII</td>
<td>x</td>
<td>1</td>
</tr>
<tr>
<td>Payload Length = y</td>
<td>4</td>
<td>1 + x</td>
</tr>
<tr>
<td>Binary Payload</td>
<td>y</td>
<td>5 + x</td>
</tr>
</tbody></table>

<p>The MIME protocol will be an inner protocol within the binary data packet messages. The MIME data will be broken into 250 byte chunks and sent within binary data packet messages. The first byte within the message will be a sequence counter; all remaining bytes will contain the MIME data.</p>

<h4 id="binary-data-packets-containing-mime-type-data">Binary Data Packets Containing MIME Type Data</h4>

<p>This is an example of binary data packets for image data transferred using the MIME type &ldquo;image/jpeg&rdquo;. The image size is 83000 bytes.</p>

<p><strong>First packet:</strong></p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 0x86</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = 250</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><strong>Sequence number = 0</strong></td>
<td><strong>1</strong></td>
<td><strong>3</strong></td>
</tr>
<tr>
<td><strong>MIME type length = 10</strong></td>
<td><strong>1</strong></td>
<td><strong>4</strong></td>
</tr>
<tr>
<td><strong>MIME type (&ldquo;image/jpeg&rdquo;)</strong></td>
<td><strong>10</strong></td>
<td><strong>5</strong></td>
</tr>
<tr>
<td><strong>Payload Length = 83000</strong></td>
<td><strong>4</strong></td>
<td><strong>15</strong></td>
</tr>
<tr>
<td><strong>Binary Payload (the first 234 bytes)</strong></td>
<td><strong>234</strong></td>
<td><strong>19</strong></td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>253</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>255</td>
</tr>
</tbody></table>

<p><strong>Second packet:</strong></p>

<table><thead>
<tr>
<th></th>
<th>Bytes</th>
<th>Position</th>
</tr>
</thead><tbody>
<tr>
<td>STX (0x02)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Message Type = 0x86</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Message Body Length = 250</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td><strong>Sequence number = 1</strong></td>
<td><strong>1</strong></td>
<td><strong>3</strong></td>
</tr>
<tr>
<td><strong>Binary Payload (the next 249 bytes)</strong></td>
<td><strong>249</strong></td>
<td><strong>4</strong></td>
</tr>
<tr>
<td>Checksum</td>
<td>2</td>
<td>253</td>
</tr>
<tr>
<td>ETX (0x03)</td>
<td>1</td>
<td>255</td>
</tr>
</tbody></table>

        </div>
      </article>

    </div>
  </div>
  <footer class="footer mt-auto py-3">
    <!-- <div class=" col-sm-12 h-100"> -->
        <a href="https://www.geotab.com/security/" target="_blank">Security</a> &nbsp;&nbsp;|&nbsp;&nbsp;
        <a href="https://docs.google.com/document/d/1sVygLN02w2xNovFY4q5vw-oAzfYxCd7WLhyToElgDbs/pub" rel="noopener"
            target="_blank">Privacy Policy</a> &nbsp;&nbsp;|&nbsp;&nbsp;
        <a href="https://myadmin.geotab.com/sdk" rel="noopener" target="_blank">MyAdmin SDK</a>
        &nbsp;&nbsp;|&nbsp;&nbsp;
        <a href="https://docs.google.com/document/d/1jA8Qc8WZMhmaqdjd8Ng8rY4iMI073xCfLNt_DSP72TQ/edit" rel="noopener"
            target="_blank">End User Agreement</a>
        <div class="copyright-container copyright-white-text">Copyright &copy; 2017 Geotab</div>
    <!-- </div> -->
</footer>
</main>
</div>

  <!-- JS -->
  <!-- inject:js -->
  <script src="/assets/javascript/index.js"></script>
  <!-- endinject -->

</body>

</html>